const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jszip.min-BlXDyvs8.js","assets/index-CFdLIx2s.js","assets/index-_0L7VFBF.css"])))=>i.map(i=>d[i]);
import{g as B,h as G,r as y,l as F,n as A,H as dt,J as pt,_ as l,T as S,k as a,j as w,s as x,S as it,q as L,t as z,L as T,d as ut,K as mt,b as bt,i as ot,v as k,M as gt,N as ft,O as st,P as ht,Q as vt,R as lt,y as X,D as yt,z as xt,A as Ct,E as at,U as rt,V as wt,W as $t}from"./index-CFdLIx2s.js";function It(t){return G("MuiFormControlLabel",t)}const q=B("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),St=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],kt=t=>{const{classes:e,disabled:o,labelPlacement:s,error:n,required:r}=t,i={root:["root",o&&"disabled",`labelPlacement${L(s)}`,n&&"error",r&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",n&&"error"]};return z(i,It,e)},Lt=x("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${q.label}`]:e.label},e.root,e[`labelPlacement${L(o.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>l({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${q.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${q.label}`]:{[`&.${q.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Pt=x("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${q.error}`]:{color:(t.vars||t).palette.error.main}})),Rt=y.forwardRef(function(e,o){var s,n;const r=F({props:e,name:"MuiFormControlLabel"}),{className:i,componentsProps:u={},control:d,disabled:b,disableTypography:g,label:f,labelPlacement:c="end",required:p,slotProps:m={}}=r,h=A(r,St),C=dt(),$=(s=b??d.props.disabled)!=null?s:C==null?void 0:C.disabled,D=p??d.props.required,V={disabled:$,required:D};["checked","name","onChange","value","inputRef"].forEach(j=>{typeof d.props[j]>"u"&&typeof r[j]<"u"&&(V[j]=r[j])});const W=pt({props:r,muiFormControl:C,states:["error"]}),O=l({},r,{disabled:$,labelPlacement:c,required:D,error:W.error}),_=kt(O),E=(n=m.typography)!=null?n:u.typography;let I=f;return I!=null&&I.type!==S&&!g&&(I=a.jsx(S,l({component:"span"},E,{className:w(_.label,E==null?void 0:E.className),children:I}))),a.jsxs(Lt,l({className:w(_.root,i),ownerState:O,ref:o},h,{children:[y.cloneElement(d,V),D?a.jsxs(it,{display:"block",children:[I,a.jsxs(Pt,{ownerState:O,"aria-hidden":!0,className:_.asterisk,children:["â€‰","*"]})]}):I]}))});function At(t){return G("MuiListItem",t)}const M=B("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),jt=B("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Nt(t){return G("MuiListItemSecondaryAction",t)}B("MuiListItemSecondaryAction",["root","disableGutters"]);const Mt=["className"],Tt=t=>{const{disableGutters:e,classes:o}=t;return z({root:["root",e&&"disableGutters"]},Nt,o)},Bt=x("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.disableGutters&&e.disableGutters]}})(({ownerState:t})=>l({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},t.disableGutters&&{right:0})),ct=y.forwardRef(function(e,o){const s=F({props:e,name:"MuiListItemSecondaryAction"}),{className:n}=s,r=A(s,Mt),i=y.useContext(T),u=l({},s,{disableGutters:i.disableGutters}),d=Tt(u);return a.jsx(Bt,l({className:w(d.root,n),ownerState:u,ref:o},r))});ct.muiName="ListItemSecondaryAction";const Ft=["className"],zt=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],Dt=(t,e)=>{const{ownerState:o}=t;return[e.root,o.dense&&e.dense,o.alignItems==="flex-start"&&e.alignItemsFlexStart,o.divider&&e.divider,!o.disableGutters&&e.gutters,!o.disablePadding&&e.padding,o.button&&e.button,o.hasSecondaryAction&&e.secondaryAction]},Ot=t=>{const{alignItems:e,button:o,classes:s,dense:n,disabled:r,disableGutters:i,disablePadding:u,divider:d,hasSecondaryAction:b,selected:g}=t;return z({root:["root",n&&"dense",!i&&"gutters",!u&&"padding",d&&"divider",r&&"disabled",o&&"button",e==="flex-start"&&"alignItemsFlexStart",b&&"secondaryAction",g&&"selected"],container:["container"]},At,s)},_t=x("div",{name:"MuiListItem",slot:"Root",overridesResolver:Dt})(({theme:t,ownerState:e})=>l({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!e.disablePadding&&l({paddingTop:8,paddingBottom:8},e.dense&&{paddingTop:4,paddingBottom:4},!e.disableGutters&&{paddingLeft:16,paddingRight:16},!!e.secondaryAction&&{paddingRight:48}),!!e.secondaryAction&&{[`& > .${jt.root}`]:{paddingRight:48}},{[`&.${M.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${M.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:k.alpha(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${M.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:k.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${M.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.alignItems==="flex-start"&&{alignItems:"flex-start"},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},e.button&&{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${M.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:k.alpha(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:k.alpha(t.palette.primary.main,t.palette.action.selectedOpacity)}}},e.hasSecondaryAction&&{paddingRight:48})),Et=x("li",{name:"MuiListItem",slot:"Container",overridesResolver:(t,e)=>e.container})({position:"relative"}),Ut=y.forwardRef(function(e,o){const s=F({props:e,name:"MuiListItem"}),{alignItems:n="center",autoFocus:r=!1,button:i=!1,children:u,className:d,component:b,components:g={},componentsProps:f={},ContainerComponent:c="li",ContainerProps:{className:p}={},dense:m=!1,disabled:h=!1,disableGutters:C=!1,disablePadding:$=!1,divider:D=!1,focusVisibleClassName:V,secondaryAction:W,selected:O=!1,slotProps:_={},slots:E={}}=s,I=A(s.ContainerProps,Ft),j=A(s,zt),Y=y.useContext(T),J=y.useMemo(()=>({dense:m||Y.dense||!1,alignItems:n,disableGutters:C}),[n,Y.dense,m,C]),K=y.useRef(null);ut(()=>{r&&K.current&&K.current.focus()},[r]);const N=y.Children.toArray(u),Q=N.length&&mt(N[N.length-1],["ListItemSecondaryAction"]),Z=l({},s,{alignItems:n,autoFocus:r,button:i,dense:J.dense,disabled:h,disableGutters:C,disablePadding:$,divider:D,hasSecondaryAction:Q,selected:O}),tt=Ot(Z),et=bt(K,o),H=E.root||g.Root||_t,U=_.root||f.root||{},P=l({className:w(tt.root,U.className,d),disabled:h},j);let R=b||"li";return i&&(P.component=b||"div",P.focusVisibleClassName=w(M.focusVisible,V),R=gt),Q?(R=!P.component&&!b?"div":R,c==="li"&&(R==="li"?R="div":P.component==="li"&&(P.component="div")),a.jsx(T.Provider,{value:J,children:a.jsxs(Et,l({as:c,className:w(tt.container,p),ref:et,ownerState:Z},I,{children:[a.jsx(H,l({},U,!ot(H)&&{as:R,ownerState:l({},Z,U.ownerState)},P,{children:N})),N.pop()]}))})):a.jsx(T.Provider,{value:J,children:a.jsxs(H,l({},U,{as:R,ref:et},!ot(H)&&{ownerState:l({},Z,U.ownerState)},P,{children:[N,W&&a.jsx(ct,{children:W})]}))})});function qt(t){return G("MuiListItemAvatar",t)}B("MuiListItemAvatar",["root","alignItemsFlexStart"]);const Gt=["className"],Vt=t=>{const{alignItems:e,classes:o}=t;return z({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},qt,o)},Wt=x("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({ownerState:t})=>l({minWidth:56,flexShrink:0},t.alignItems==="flex-start"&&{marginTop:8})),Zt=y.forwardRef(function(e,o){const s=F({props:e,name:"MuiListItemAvatar"}),{className:n}=s,r=A(s,Gt),i=y.useContext(T),u=l({},s,{alignItems:i.alignItems}),d=Vt(u);return a.jsx(Wt,l({className:w(d.root,n),ownerState:u,ref:o},r))}),Ht=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Jt=t=>{const{classes:e,inset:o,primary:s,secondary:n,dense:r}=t;return z({root:["root",o&&"inset",r&&"dense",s&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},ft,e)},Kt=x("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${st.primary}`]:e.primary},{[`& .${st.secondary}`]:e.secondary},e.root,o.inset&&e.inset,o.primary&&o.secondary&&e.multiline,o.dense&&e.dense]}})(({ownerState:t})=>l({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Xt=y.forwardRef(function(e,o){const s=F({props:e,name:"MuiListItemText"}),{children:n,className:r,disableTypography:i=!1,inset:u=!1,primary:d,primaryTypographyProps:b,secondary:g,secondaryTypographyProps:f}=s,c=A(s,Ht),{dense:p}=y.useContext(T);let m=d??n,h=g;const C=l({},s,{disableTypography:i,inset:u,primary:!!m,secondary:!!h,dense:p}),$=Jt(C);return m!=null&&m.type!==S&&!i&&(m=a.jsx(S,l({variant:p?"body2":"body1",className:$.primary,component:b!=null&&b.variant?void 0:"span",display:"block"},b,{children:m}))),h!=null&&h.type!==S&&!i&&(h=a.jsx(S,l({variant:"body2",className:$.secondary,color:"text.secondary",display:"block"},f,{children:h}))),a.jsxs(Kt,l({className:w($.root,r),ownerState:C,ref:o},c,{children:[m,h]}))});function Yt(t){return G("MuiSwitch",t)}const v=B("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Qt=["className","color","edge","size","sx"],te=t=>{const{classes:e,edge:o,size:s,color:n,checked:r,disabled:i}=t,u={root:["root",o&&`edge${L(o)}`,`size${L(s)}`],switchBase:["switchBase",`color${L(n)}`,r&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=z(u,Yt,e);return l({},e,d)},ee=x("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.edge&&e[`edge${L(o.edge)}`],e[`size${L(o.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${v.thumb}`]:{width:16,height:16},[`& .${v.switchBase}`]:{padding:4,[`&.${v.checked}`]:{transform:"translateX(16px)"}}}}]}),oe=x(ht,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.switchBase,{[`& .${v.input}`]:e.input},o.color!=="default"&&e[`color${L(o.color)}`]]}})(({theme:t})=>({position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:`${t.palette.mode==="light"?t.palette.common.white:t.palette.grey[300]}`,transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),[`&.${v.checked}`]:{transform:"translateX(20px)"},[`&.${v.disabled}`]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:`${t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[600]}`},[`&.${v.checked} + .${v.track}`]:{opacity:.5},[`&.${v.disabled} + .${v.track}`]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:`${t.palette.mode==="light"?.12:.2}`},[`& .${v.input}`]:{left:"-100%",width:"300%"}}),({theme:t})=>({"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:k.alpha(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(([,e])=>e.main&&e.light).map(([e])=>({props:{color:e},style:{[`&.${v.checked}`]:{color:(t.vars||t).palette[e].main,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:k.alpha(t.palette[e].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${v.disabled}`]:{color:t.vars?t.vars.palette.Switch[`${e}DisabledColor`]:`${t.palette.mode==="light"?k.lighten(t.palette[e].main,.62):k.darken(t.palette[e].main,.55)}`}},[`&.${v.checked} + .${v.track}`]:{backgroundColor:(t.vars||t).palette[e].main}}}))]})),se=x("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:`${t.palette.mode==="light"?t.palette.common.black:t.palette.common.white}`,opacity:t.vars?t.vars.opacity.switchTrack:`${t.palette.mode==="light"?.38:.3}`})),ae=x("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(t,e)=>e.thumb})(({theme:t})=>({boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),re=y.forwardRef(function(e,o){const s=F({props:e,name:"MuiSwitch"}),{className:n,color:r="primary",edge:i=!1,size:u="medium",sx:d}=s,b=A(s,Qt),g=l({},s,{color:r,edge:i,size:u}),f=te(g),c=a.jsx(ae,{className:f.thumb,ownerState:g});return a.jsxs(ee,{className:w(f.root,n),sx:d,ownerState:g,children:[a.jsx(oe,l({type:"checkbox",icon:c,checkedIcon:c,ref:o,ownerState:g},b,{classes:l({},f,{root:f.switchBase})})),a.jsx(se,{className:f.track,ownerState:g})]})}),nt=async(t,e,o)=>{const s=await createImageBitmap(t),n=document.createElement("canvas");return n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0),new Promise(r=>n.toBlob(i=>r({blob:i,size:i.size,url:URL.createObjectURL(i)}),`image/${e}`,o))},ne=async(t,e)=>{let o;t instanceof Blob?o=t:o=await(await fetch(t)).blob(),lt.saveAs(o,e)},ie=async t=>{const{default:e}=await vt(async()=>{const{default:n}=await import("./jszip.min-BlXDyvs8.js").then(r=>r.j);return{default:n}},__vite__mapDeps([0,1,2])),o=new e;for(const{blob:n,name:r}of t){const i=n instanceof Blob?n:await(await fetch(n)).blob();o.file(r,i)}const s=await o.generateAsync({type:"blob"});lt.saveAs(s,"shinobi.zip")};function ce(){const t=X(c=>c.downloadModalOpen),e=()=>X.getState().closeDownloadModal(),{items:o,selected:s,global:n}=X.getState(),[r,i]=y.useState(!1),u=c=>c.flatMap(p=>(Array.isArray(p.formats)?p.formats:[]).map(h=>({file:p.file,fmt:h,q:p.q??n.q,baseName:(p.customName||p.name).replace(/\.[^/.]+$/,"")}))),d=o.filter(c=>s.has(c.id)),b=u(d),g=u(o),f=async c=>{if(r){const p=[];for(const m of c){const{blob:h}=await nt(m.file,m.fmt,m.q);p.push({blob:h,name:`${m.baseName}.${m.fmt}`})}return ie(p)}else for(const p of c){const{blob:m}=await nt(p.file,p.fmt,p.q);ne(m,`${p.baseName}.${p.fmt}`)}};return a.jsxs(yt,{open:t,onClose:e,fullWidth:!0,maxWidth:"sm",role:"dialog","aria-labelledby":"download-dialog-title",children:[a.jsx(xt,{id:"download-dialog-title",children:"Download"}),a.jsx(Ct,{children:o.length===0?a.jsx(S,{children:"No files available"}):a.jsxs(a.Fragment,{children:[a.jsx(Rt,{control:a.jsx(re,{checked:r,onChange:c=>i(c.target.checked),color:"primary"}),label:"Download as ZIP archive"}),a.jsxs(it,{direction:"column",spacing:2,mt:2,children:[a.jsx(at,{startIcon:a.jsx(rt,{}),variant:"contained",fullWidth:!0,disabled:b.length===0,onClick:()=>f(b),children:r?`Download Selected as ZIP (${b.length})`:`Download Selected (${b.length})`}),a.jsx(at,{startIcon:a.jsx(rt,{}),variant:"contained",fullWidth:!0,onClick:()=>f(g),children:r?`Download All as ZIP (${g.length})`:`Download All (${g.length})`})]}),d.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs(S,{variant:"subtitle1",mt:3,mb:1,children:["Selected items (",d.length,"):"]}),a.jsx(wt,{"aria-label":"Selected items to download",sx:{maxHeight:200,overflowY:"auto"},children:d.map(c=>a.jsxs(Ut,{children:[a.jsx(Zt,{children:a.jsx($t,{src:c.urlC||c.url})}),a.jsx(Xt,{primary:c.customName||c.name,secondary:`${((c.sizeO??0)/1024).toFixed(1)} KB`})]},c.id))})]})]})})]})}export{ce as default};
